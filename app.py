
import streamlit as st
import json
from datetime import date

st.set_page_config(page_title="ЁЯМ╛ Yugdaan v9 - Full Bihar Map", layout="centered")
st.title("ЁЯМ╛ Yugdaan v9 тАУ рдкрд┐рдирдХреЛрдб рдЖрдзрд╛рд░рд┐рдд рдлрд╝рд╕рд▓ рд╕рд▓рд╛рд╣ (рдмрд┐рд╣рд╛рд░ рдХреЗ рд▓рд┐рдП)")

st.markdown("### ЁЯУН рдкрд┐рдирдХреЛрдб рджрд░реНрдЬ рдХрд░реЗрдВ:")
pincode = st.text_input("рдЙрджрд╛рд╣рд░рдг: 841301", max_chars=6)

st.markdown("### ЁЯМ╛ рдЬрд╝рдореАрди рдХрд╛ рдЖрдХрд╛рд░:")
land = st.radio("рдЖрдкрдХреЗ рдкрд╛рд╕ рдХрд┐рддрдиреА рдЬрд╝рдореАрди рд╣реИ?", ["<1 рдПрдХрдбрд╝", "1-2 рдПрдХрдбрд╝", "2-5 рдПрдХрдбрд╝", "5+ рдПрдХрдбрд╝"])

st.markdown("### ЁЯМК рдЬрд╝рдореАрди рдХреА рд╣рд╛рд▓рдд:")
soil_type = st.selectbox("рдЬрд╝рдореАрди рдХреА рд╕реНрдерд┐рддрд┐:", ["рд╕рд╛рдорд╛рдиреНрдп (Normal)", "рджрд▓рджрд▓реА (Waterlogged)", "рдмрдВрдЬрд░ (Barren)", "рд░реЗрддреАрд▓реА (Sandy)"])

st.markdown("### ЁЯТ╕ рдЦреЗрддреА рдХрд╛ рдмрдЬрдЯ:")
budget = st.selectbox("рдмрдЬрдЯ:", ["тВ╣0тАУтВ╣20,000", "тВ╣20,000тАУтВ╣50,000", "тВ╣50,000+"])

# Load full pincode-district map
with open("bihar_pincode_district_map.json", "r", encoding="utf-8") as f:
    district_map = json.load(f)

# Sample crop recommendations for demo (mock logic reused)
district_crop_demo = {
    "Chapra": [("рдЖрд▓реВ", "тВ╣18K", "тВ╣1.2L", "тЬЕ Stable"), ("рдзрд╛рди", "тВ╣20K", "тВ╣1.4L", "тЫЕ Mid Risk")],
    "Darbhanga": [("рдордЦрд╛рдирд╛", "тВ╣25K", "тВ╣1.5L", "тЬЕ Local"), ("рдзрд╛рди", "тВ╣20K", "тВ╣1.2L", "тЫЕ Mid Risk")],
    "Muzaffarpur": [("рд▓реАрдЪреА", "тВ╣28K", "тВ╣2L", "тЬЕ Export"), ("рд╕рд░рд╕реЛрдВ", "тВ╣15K", "тВ╣70K", "тЬЕ Winter")],
}

default_crops = [("рдЧреЗрд╣реВрдВ", "тВ╣22K", "тВ╣1.3L", "тЬЕ Reliable"), ("рдЪрдирд╛", "тВ╣18K", "тВ╣1L", "тЬЕ Low Cost")]

if st.button("ЁЯУК рд╕рд▓рд╛рд╣ рд▓реЗрдВ"):
    district = district_map.get(pincode)
    if district:
        st.success(f"ЁЯУН рдкрд┐рдирдХреЛрдб {pincode} тЖТ рдЬрд┐рд▓рд╛: {district}")
        st.markdown("### ЁЯза AI рд╕реБрдЭрд╛рдИ рдЧрдИ рдлрд╝рд╕рд▓реЗрдВ:")

        crops = district_crop_demo.get(district, default_crops)
        st.markdown("| рдлрд╝рд╕рд▓ | рд▓рд╛рдЧрдд | рдЖрдорджрдиреА | рдЬреЛрдЦрд┐рдо |")
        st.markdown("|------|--------|---------|--------|")
        for crop in crops:
            st.markdown(f"| {crop[0]} | {crop[1]} | {crop[2]} | {crop[3]} |")
    else:
        st.error("тЭМ рдмрд┐рд╣рд╛рд░ рдХрд╛ рдпрд╣ рдкрд┐рдирдХреЛрдб рдирд╣реАрдВ рдорд┐рд▓рд╛ред рдХреГрдкрдпрд╛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред")

    st.markdown("### ЁЯУЕ рдЖрдЬ рд╕реЗ рдХреНрдпрд╛ рдХрд░реЗрдВ?")
    st.info("ЁЯСЙ рдЖрдЬ рдмреАрдЬ рдФрд░ рдЦрд╛рдж рдХреА рдЬрд╛рдирдХрд╛рд░реА рд▓реЗрдВ, рдХрд▓ рдЬреБрддрд╛рдИ рдХрд░рд╡рд╛рдПрдВред рд╣рд░ рдлрд╝рд╕рд▓ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ рдЧрд╛рдЗрдб рдЬрд▓реНрдж рдЬреЛрдбрд╝реА рдЬрд╛рдПрдЧреАред")

    st.caption("тЪЩя╕П рдпрд╣ рд╕реБрдЭрд╛рд╡ рдкрд┐рдирдХреЛрдб, рдЬрд╝рдореАрди рдФрд░ рдмрдЬрдЯ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ тАУ Yugdaan AI рджреНрд╡рд╛рд░рд╛ред")
